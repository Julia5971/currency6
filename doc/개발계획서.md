# 🚀 실시간 환율 정보 및 분석 서비스 개발 계획서

## 📋 개발 방식: TDD (Test-Driven Development)

각 단계마다 **Red → Green → Refactor** 사이클을 따릅니다:
1. **Red**: 실패하는 테스트 작성
2. **Green**: 테스트를 통과하는 최소한의 코드 작성  
3. **Refactor**: 코드 개선 및 최적화

---

## 🎯 1단계: 프로젝트 초기 설정 및 기본 구조

### 📝 작업 내용
- [ ] React + TypeScript 프로젝트 생성
- [ ] 필요한 의존성 설치 (Chart.js, API 연동 라이브러리)
- [ ] 기본 폴더 구조 생성
- [ ] 환경변수 설정 파일 생성

### 🧪 테스트 코드
```typescript
// App.test.tsx
describe('App Component', () => {
  test('renders without crashing', () => {
    render(<App />);
    expect(screen.getByText(/환율 정보/i)).toBeInTheDocument();
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] `npm install` 실행 후 의존성 설치 완료
- [ ] `npm run dev` 실행 시 개발 서버 정상 시작
- [ ] 브라우저에서 기본 React 앱 화면 표시
- [ ] 콘솔에 에러 없음

---

## 🎨 2단계: 기본 레이아웃 및 스타일링

### 📝 작업 내용
- [ ] 레몬색 배경 (#FFEB3B) 적용
- [ ] 메인 컨테이너 구현 (흰색, 둥근 모서리, 그림자)
- [ ] 반응형 그리드 시스템 구축
- [ ] 기본 컬러 시스템 적용

### 🧪 테스트 코드
```typescript
// Layout.test.tsx
describe('Layout Component', () => {
  test('has lemon background color', () => {
    render(<Layout />);
    const container = screen.getByTestId('main-container');
    expect(container).toHaveStyle({ backgroundColor: '#FFEB3B' });
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 전체 화면이 레몬색 배경으로 채워짐
- [ ] 중앙에 흰색 컨테이너가 둥근 모서리와 그림자와 함께 표시
- [ ] 모바일과 데스크톱에서 반응형으로 동작
- [ ] 개발자 도구에서 CSS 속성 확인

---

## 💳 3단계: 환율 정보 카드 컴포넌트

### 📝 작업 내용
- [ ] ExchangeRateCard 컴포넌트 생성
- [ ] 4개 통화 카드 (USD, EUR, JPY, CNY) 구현
- [ ] 카드 스타일링 (연한 회색 배경, 100px 높이)
- [ ] 통화 아이콘 및 정보 표시

### 🧪 테스트 코드
```typescript
// ExchangeRateCard.test.tsx
describe('ExchangeRateCard', () => {
  test('displays currency information correctly', () => {
    render(<ExchangeRateCard currency="USD" rate={1300} />);
    expect(screen.getByText('USD')).toBeInTheDocument();
    expect(screen.getByText('1,300')).toBeInTheDocument();
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 4개 환율 카드가 가로로 나란히 배치
- [ ] 각 카드에 통화명과 아이콘이 표시
- [ ] 카드 배경이 연한 회색 (#F7F8F9)
- [ ] 환율 숫자가 20px 굵은 폰트로 표시

---

## 🔌 4단계: 실시간 환율 API 연동

### 📝 작업 내용
- [ ] ExchangeRate-API 연동 설정 (1순위)
- [ ] CurrencyAPI 연동 설정 (2순위)
- [ ] 다중 API 연동 및 장애 복구 (Failover) 시스템 구현
  - API 전환 관리자 (apiManager.ts) 구현
  - 자동 장애 감지 및 복구 로직
  - API 상태 모니터링 시스템
- [ ] useExchangeRate 훅 구현 (다중 API 지원)
- [ ] 실시간 환율 데이터 가져오기
- [ ] 에러 핸들링 및 로딩 상태
- [ ] API 상태 모니터링 및 자동 전환
- [ ] API 전환 시 데이터 일관성 보장

### 🧪 테스트 코드
```typescript
// useExchangeRate.test.ts
describe('useExchangeRate Hook', () => {
  test('fetches exchange rate data from primary API', async () => {
    const { result } = renderHook(() => useExchangeRate());
    await waitFor(() => {
      expect(result.current.data).toBeDefined();
      expect(result.current.apiSource).toBe('ExchangeRate-API');
    });
  });

  test('falls back to secondary API when primary fails', async () => {
    // 1순위 API 실패 시뮬레이션
    server.use(
      rest.get('*/exchangerate-api.com/*', (req, res, ctx) => {
        return res(ctx.status(500));
      })
    );
    
    const { result } = renderHook(() => useExchangeRate());
    await waitFor(() => {
      expect(result.current.data).toBeDefined();
      expect(result.current.apiSource).toBe('CurrencyAPI');
    });
  });

  test('handles both APIs failing gracefully', async () => {
    // 두 API 모두 실패 시뮬레이션
    server.use(
      rest.get('*/exchangerate-api.com/*', (req, res, ctx) => {
        return res(ctx.status(500));
      }),
      rest.get('*/currencyapi.com/*', (req, res, ctx) => {
        return res(ctx.status(500));
      })
    );
    
    const { result } = renderHook(() => useExchangeRate());
    await waitFor(() => {
      expect(result.current.error).toBeDefined();
      expect(result.current.error.message).toContain('모든 API 서비스에 접근할 수 없습니다');
    });
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 1순위 API(ExchangeRate-API)에서 실제 환율 데이터가 표시됨
- [ ] 1순위 API 실패 시 자동으로 2순위 API(CurrencyAPI)로 전환
- [ ] 두 API 모두 실패 시 적절한 에러 메시지 표시
- [ ] 로딩 중일 때 적절한 로딩 인디케이터 표시
- [ ] 현재 사용 중인 API 소스를 화면에 표시 (선택사항)
- [ ] 개발자 도구 Network 탭에서 API 호출 및 전환 과정 확인
- [ ] API 전환 시 데이터 일관성 유지 확인

---

## 📊 5단계: 환율 차트 구현 (2x2 그리드)

### 📝 작업 내용
- [ ] Chart.js 설정 및 차트 컴포넌트 생성
- [ ] 4개 차트를 2x2 그리드로 배치
- [ ] 각 통화별 차트 색상 적용
- [ ] 한 달간 환율 변동 데이터 표시

### 🧪 테스트 코드
```typescript
// ExchangeRateChart.test.tsx
describe('ExchangeRateChart', () => {
  test('renders 4 charts in 2x2 grid', () => {
    render(<ExchangeRateChart />);
    const charts = screen.getAllByTestId('chart');
    expect(charts).toHaveLength(4);
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 4개 차트가 2x2 그리드로 정렬
- [ ] 각 차트에 올바른 색상 적용:
  - USD: 파랑 (#007BFF)
  - EUR: 초록 (#28A745)
  - JPY: 노랑 (#FFC107)
  - CNY: 빨강 (#DC3545)
- [ ] 차트에 실제 환율 데이터가 표시
- [ ] 차트 크기: 가로 500px, 세로 300px

---

## 🧮 6단계: 환차손익 계산기

### 📝 작업 내용
- [ ] 입력 필드 (매입 환율, 환전 금액) 구현
- [ ] 계산 로직 구현
- [ ] 결과 표시 (이익: 초록색 👍, 손해: 빨간색 👎)
- [ ] 레몬색 계산 버튼 스타일링

### 🧪 테스트 코드
```typescript
// ProfitLossCalculator.test.tsx
describe('ProfitLossCalculator', () => {
  test('calculates profit correctly', () => {
    render(<ProfitLossCalculator />);
    fireEvent.change(screen.getByLabelText('매입 환율'), { target: { value: '1200' } });
    fireEvent.change(screen.getByLabelText('환전 금액'), { target: { value: '1000' } });
    fireEvent.click(screen.getByText('계산하기'));
    expect(screen.getByText(/이익/)).toBeInTheDocument();
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 입력 필드에 값을 입력하고 계산 버튼 클릭 시 결과 표시
- [ ] 이익일 때: 초록색 폰트와 👍 이모티콘
- [ ] 손해일 때: 빨간색 폰트와 👎 이모티콘
- [ ] 계산 버튼이 레몬색 (#FFEB3B) 배경
- [ ] 입력 필드 높이 40px, 테두리 둥글기 6px

---

## 🔧 7단계: 통합 테스트 및 최적화

### 📝 작업 내용
- [ ] 전체 기능 통합 테스트
- [ ] 성능 최적화 (메모이제이션, 불필요한 리렌더링 방지)
- [ ] 접근성 개선 (ARIA 라벨, 키보드 네비게이션)
- [ ] 크로스 브라우저 호환성 테스트

### 🧪 테스트 코드
```typescript
// Integration.test.tsx
describe('Full Application Integration', () => {
  test('complete user flow works', async () => {
    render(<App />);
    // 환율 정보 확인
    expect(screen.getByText('USD')).toBeInTheDocument();
    // 차트 확인
    expect(screen.getAllByTestId('chart')).toHaveLength(4);
    // 계산기 동작 확인
    // ... 계산기 테스트
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] 모든 기능이 정상 작동
- [ ] Chrome, Firefox, Safari에서 동일하게 동작
- [ ] 모바일 디바이스에서 터치 인터랙션 정상
- [ ] 개발자 도구 Performance 탭에서 성능 지표 확인

---

## 🚀 8단계: 배포 및 문서화

### 📝 작업 내용
- [ ] 프로덕션 빌드 생성
- [ ] 배포 환경 설정
- [ ] README.md 최종 업데이트
- [ ] 사용자 가이드 작성

### 🧪 테스트 코드
```typescript
// Build.test.ts
describe('Production Build', () => {
  test('builds successfully', () => {
    const result = execSync('npm run build');
    expect(result.status).toBe(0);
  });
});
```

### ✅ 체크 포인트 (브라우저에서 확인)
- [ ] `npm run build` 명령어로 빌드 성공
- [ ] dist 폴더에 정적 파일들이 생성됨
- [ ] 배포된 사이트가 정상 작동
- [ ] README.md에 모든 정보가 포함됨

---

## 📋 개발 체크리스트

### 🔄 매 단계 완료 후
- [ ] 테스트 코드 작성 및 실행 (`npm test`)
- [ ] 브라우저에서 기능 동작 확인
- [ ] 코드 커밋 및 푸시
- [ ] 다음 단계로 진행

### 🚨 문제 발생 시
- [ ] 에러 메시지 분석
- [ ] 개발자 도구 콘솔 확인
- [ ] 네트워크 탭에서 API 호출 상태 확인
- [ ] 필요시 이전 단계로 롤백

### 📱 반응형 테스트
- [ ] 데스크톱 (1920x1080)
- [ ] 태블릿 (768x1024)
- [ ] 모바일 (375x667)

---

## 🎯 최종 목표

사용자가 웹사이트에 접속했을 때:
1. **레몬색 배경**에 **흰색 컨테이너**가 중앙에 표시
2. **4개 환율 카드**가 가로로 나란히 배치
3. **2x2 그리드**로 **4개 환율 차트** 표시
4. **환차손익 계산기**로 손익 계산 가능
5. **직관적이고 아름다운 UI/UX** 제공

각 단계를 성공적으로 완료하면, 초보자도 쉽게 사용할 수 있는 전문적인 환율 정보 서비스가 완성됩니다!
